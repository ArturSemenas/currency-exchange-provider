# Production Configuration Profile
# Activate with: --spring.profiles.active=prod or SPRING_PROFILES_ACTIVE=prod

# Server Configuration
server.port=8080

# Database Configuration (use environment variables in production)
spring.datasource.url=${DATABASE_URL:jdbc:postgresql://postgres:5432/currency_exchange_db}
spring.datasource.username=${DATABASE_USERNAME:postgres}
spring.datasource.password=${DATABASE_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# Connection Pool Settings (HikariCP)
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# JPA Configuration - Production
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# Liquibase Configuration
spring.liquibase.change-log=classpath:/db/changelog/db.changelog-master.xml
spring.liquibase.enabled=true

# Redis Configuration (use environment variables in production)
spring.data.redis.host=${REDIS_HOST:redis}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.password=${REDIS_PASSWORD:}
spring.data.redis.timeout=60000
spring.cache.type=redis
spring.cache.redis.time-to-live=7200000

# External API Configuration
api.fixer.url=${FIXER_API_URL:https://data.fixer.io/api}
api.fixer.key=${FIXER_API_KEY}

api.exchangeratesapi.url=${EXCHANGERATESAPI_URL:https://api.exchangeratesapi.io/v1}
api.exchangeratesapi.key=${EXCHANGERATESAPI_KEY}

# Scheduling Configuration
exchange.rates.update.cron=${EXCHANGE_RATES_CRON:0 0 * * * *}

# Actuator Configuration - Production
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=when-authorized
management.health.defaults.enabled=true

# Logging Configuration - Production
logging.level.root=INFO
logging.level.com.currencyexchange.provider=INFO
logging.level.org.springframework.web=WARN
logging.level.org.springframework.security=WARN
logging.level.org.hibernate=WARN

# Security - Session Management
server.servlet.session.timeout=30m
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.secure=true

# Enable compression
server.compression.enabled=true
server.compression.mime-types=application/json,application/xml,text/html,text/xml,text/plain
server.compression.min-response-size=1024
